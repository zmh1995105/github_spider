!function(a){a.fn.processWidget=function(b){var c=a.extend({},a.fn.processWidget.defaultSettings,b),d=this,e=a(d),f=e.attr("data-url"),g=e.attr("id"),h=a("["+c.buttonAttributeName+"="+g+"]");d.on(c.eventRunName,function(){e.empty(),h.attr("disabled","disabled"),console.log("processWidget: performing request to "+f),a.ajax({url:f,complete:function(a,b){console.log("processWidget: request completed with "+b),h.attr("disabled",null);var e=null,f=a.responseText;if(f.length>0&&f.indexOf("\n")!=-1){var g=f.split("\n");e=g[g.length-1].trim()}c.completeCallback.call(d,a.status,e,f)},beforeSend:function(a,b){var c=this,d=b.xhr;b.xhr=function(){var a=d();return a.onreadystatechange=function(){"function"==typeof c.readyStateChanged&&c.readyStateChanged(this)},a}},readyStateChanged:function(a){console.log("processWidget: readyStateChanged to "+a.readyState),3==a.readyState&&(e.empty(),e.html(c.outputCallback.call(d,a.response)))}})}),h.click(function(a){return console.log("processWidget: executing via button click"),a.preventDefault(),d.trigger(c.eventRunName),!1});var i=this.attr("data-autorun");"1"!=i&&"true"!=i||(console.log("processWidget: executing autorun"),this.trigger(c.eventRunName))},a.fn.processWidget.defaultSettings={eventRunName:"processWidget::execute",buttonAttributeName:"data-shell-widget-run",outputCallback:function(a){return a.replace(/(?:\r\n|\r|\n)/g,"<br />")},completeCallback:function(a,b,c){}}}(jQuery);